---
title: MPU6050&I2C
date: 2024-06-13 15:45:14
tags: STM32
---

## MPU6050&I2C

MPU6050是一个6轴姿态传感器，可以测量芯片自身X、Y、Z轴的加速度、角速度参数，通过数据融合，可进一步得到姿态角，常应用于平衡车、飞行器等需要检测自身姿态的场景

3轴加速度计（Accelerometer）：测量X、Y、Z轴的加速度

3轴陀螺仪传感器（Gyroscope）：测量X、Y、Z轴的角速度

**传感器对于xyz三轴的定义图：**

<img src="https://s2.loli.net/2024/06/13/waGHBRPE8Q9Dhqn.png" alt="image-20240613155900360" style="zoom:50%;" />

**单轴加速度计原理图：**

<img src="https://s2.loli.net/2024/06/13/2lALHt4jcgYeikN.png" alt="image-20240613155942020" style="zoom:80%;" />

当小滑块在轴线上滑动时，滑动变阻器的电阻会发生变化，导致输出电压变化，表达加速度值。可以理解为三个弹簧测力计。

注意，重力加速度也是加速度哦~

**陀螺仪传感器原理图：**

<img src="https://s2.loli.net/2024/06/13/DnGzAVUtJg7mHIh.png" alt="image-20240613160552868" style="zoom:50%;" />

旋转轮因为角动量守恒，会倾向于保持原有的运动状态，此时，通过测量各平衡环连接处的旋转角度，即可得器件的旋转角度。但在该模块中，测量的是角速度而非角度。这可能是设备制造工艺受限导致的。测量角速度的方法类似于在旋转轴上悬挂重物，通过测量旋转时重物离轴的距离，得到角速度。

如果要得到角度，则需要对角速度值积分。

但这种方法也有一定的局限性。因为即使物体静止，角速度值也会因为噪声的影响无法完全归零。不断累积后，会使角度产生偏移。

因为陀螺仪在静态情况下不稳定，而加速度计又在动态情况下不稳定，所以我们可以通过两个数据互补滤波的方式提高准确度。

### MPU6050参数：

16位ADC采集传感器的模拟信号，量化范围：-32768~32767

加速度计满量程选择：±2、±4、±8、±16（g，重力加速度，不是克）

陀螺仪满量程选择： ±250、±500、±1000、±2000（°/sec）

可配置的数字低通滤波器（如果输出抖动过大，低通滤波器可使书籍相对平滑）

可配置的时钟源

可配置的采样分频

I2C从机地址：1101000（AD0=0）			1101001（AD0=1）

### MPU6050硬件电路：

![image-20240613162047213](https://s2.loli.net/2024/06/13/zPcjO72QwkXlpv4.png)

<img src="https://s2.loli.net/2024/06/13/ctz28oYlCQaNk3S.png" alt="image-20240613162104341" style="zoom:50%;" />

XCL和XDA用于在MPU6050芯片上挂载其它的模块，如气压计等，用于提供额外的数据。此时，MPU6050就会将从其它模块读取到的数据进行融合，做姿态解算。

AD0有一个电阻弱下拉到低电平。所以，如果不外加电压，AD0默认为低电平，即地址最低为为0；若外加高电平，则为1。

### MPU6050模块框图：

![image-20240613163624964](https://s2.loli.net/2024/06/13/IRfQg2pTtWliHdk.png)
