---
title: 任务三——TIM定时中断&呼吸灯
date: 2024-10-07 15:10:48
tags: 电子设计社团
top_img: https://patchwiki.biligame.com/images/blhx/c/cf/6tj18cxvk0h6rh0s3l2nczv8zggspm1.png
cover: https://patchwiki.biligame.com/images/blhx/c/cf/6tj18cxvk0h6rh0s3l2nczv8zggspm1.png
---

## TIM定时中断 & 呼吸灯

**任务概述：**使用TIM定时中断，制作一个计时器 & 一个随时间连续变化亮度的LED灯

**实验要求：**	

​	①用TIM定时中断功能和OLED屏幕，制作一个计时器，每秒数字自增1。要求与手机秒表对比，计时误差5%以内。

​	②用TIM定时中断和LED灯制作一个呼吸灯；即灯的亮度随时间变化，类似呼吸。要求肉眼不能看见LED的闪烁，只有光强的连续变化。

**截止日期：**10.13（星期日）

**任务注意点：**

①同前一个任务，OLED屏幕线不要接错，尤其是VCC和GND，否则会烧毁。若反接，基本必定烧毁，请重新购买（QAQ）。

②如果各位想用TIM实现间隔较短的数字自增（如0.01秒），则需要考虑到OLED显示一帧的时间可能大于0.01秒，导致在一个中断函数内没有完成屏幕显示的信号传输，就进入下一个中断，导致显示不成功。一般而言，20帧以下是可以实现的。

③一般而言，实现的呼吸灯都不会有肉眼可观察到的闪烁，这是因为PWM波的占空比更新很快，一般可以达到2k-10kHz，甚至更高。这里涉及到各位的预分频寄存器和自动重装寄存器的数值设置。如果想要观察到肉眼可见的闪烁，请尝试把这两个寄存器的值都设置得很高（具体数值自行计算）。
