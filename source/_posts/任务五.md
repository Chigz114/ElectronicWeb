---
title: 任务五——旋转编码器计次
date: 2025-1-7 14:54:00
categories: 2024每周任务
tags: 电子设计社团
top_img: https://patchwiki.biligame.com/images/blhx/c/cf/6tj18cxvk0h6rh0s3l2nczv8zggspm1.png
cover: https://patchwiki.biligame.com/images/blhx/c/cf/6tj18cxvk0h6rh0s3l2nczv8zggspm1.png 
---

## 旋转编码器计次

**任务概述：**使用EXTI外部中断，获取旋转编码器转过的格数

**任务要求：**

①在main函数的while循环内，反复读取旋转编码器引起的EXTI外部中断增量，并在OLED上显示目前转过的总格数。要求顺时针转动数值增大，逆时针转动数值减小。

②（可选）因为旋转格数本身不具备实用价值，写一个函数将旋转格数转为旋转的角度或圈数，并显示在OLED屏幕上。

**视频教程：**江协科技5.1，5.2

**任务注意点：**

①在旋转过快时，可能会出现读数无变化，甚至增减方向相反（例如，数值本应快速增大，反变为缓慢减小）。

②请注意江协科技中对于**EXTI外部中断**的原理描述。所给源码中，main函数中`Encoder_Get()`函数调用的值是什么？`Encoder_Count`变量的值是如何实现自增的？

③在`Encoder.c`文件中的`EXTI0_IRQHandler()`函数中，是如何处理数据跳变的情况的？注：因为在旋转过程中，传感器的值存在1和0之间的跳转状态，因为传感器本身的精度问题，难免会存在一小段电压在0和1之间抖动的区间。在这个区间内，例程源码是如何解决数据跳变的问题的？
